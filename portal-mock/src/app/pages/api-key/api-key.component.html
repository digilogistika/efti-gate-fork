<h5 class="text-center title mt-2 mb-4">{{'api-key.title' | translate }}</h5>
<div class="form-container">
  <div class="data-area p-4">
    <form [formGroup]="apiKeyForm" (ngSubmit)="onSubmit()">
      <div class="d-flex align-items-center mb-3 gap-3">
        <label for="apiKey" class="key flex-shrink-0">{{'api-key.enter-key-label' | translate }}</label>
        <div style="width: 300px;">
          <input
            type="password"
            id="apiKey"
            class="form-control value"
            formControlName="apiKey"
            [placeholder]="'api-key.enter-key-placeholder' | translate"
            [class.is-invalid]="apiKeyForm.get('apiKey')?.invalid && apiKeyForm.get('apiKey')?.touched">
          <div class="invalid-feedback" *ngIf="apiKeyForm.get('apiKey')?.invalid && apiKeyForm.get('apiKey')?.touched">
            {{'api-key.key-required' | translate }}
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-center gap-2 mt-4">
        <button
          type="submit"
          class="btn btn-sm btn-primary-in"
          [disabled]="apiKeyForm.invalid">
          <span class="fa-solid fa-save me-2"></span>{{'api-key.save-button' | translate }}
        </button>
        <button
          type="button"
          class="btn btn-sm btn-secondary"
          (click)="clearApiKey()"
          *ngIf="hasApiKey">
          <span class="fa-solid fa-trash-can me-2"></span>{{'api-key.clear-button' | translate }}
        </button>
        <button
          type="button"
          class="btn btn-sm btn-info"
          (click)="toggleVisibility()">
          <span class="fa-solid me-2" [ngClass]="showApiKey ? 'fa-eye-slash' : 'fa-eye'"></span>
          {{ (showApiKey ? 'api-key.hide-button' : 'api-key.show-button') | translate }}
        </button>
      </div>
    </form>
  </div>
</div>

<div class="status-container mt-4">
  <div *ngIf="hasApiKey; else noApiKeyWarning">
    <div class="alert alert-success d-flex align-items-center" role="alert">
      <span class="fa-solid fa-check-circle me-2 fs-5"></span>
      <div>
        <strong>{{'api-key.status-label' | translate }}:</strong> {{'api-key.status-configured' | translate }}
        <div class="mt-1" *ngIf="showApiKey && currentApiKey">
          <small><strong>{{'api-key.current-key-label' | translate }}: </strong> <span class="value">{{ currentApiKey }}</span></small>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noApiKeyWarning>
    <div class="alert alert-warning d-flex align-items-center" role="alert">
      <span class="fa-solid fa-triangle-exclamation me-2 fs-5"></span>
      <div>
        <strong>{{'api-key.warning-label' | translate }}:</strong> {{'api-key.warning-no-key' | translate }}
      </div>
    </div>
  </ng-template>
</div>
