{
	"info": {
		"_postman_id": "a23d0904-8bb8-4636-b95a-8eec68e8b1a1",
		"name": "eFTI-DLK",
		"description": "eFTI gate request collection for different use cases",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "37803187"
	},
	"item": [
		{
			"name": "BO",
			"item": [
				{
					"name": "Gate",
					"item": [
						{
							"name": "POST UIL Control",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let responseData = pm.response.json();",
											"pm.globals.set(\"requestId\", responseData.requestId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"gateId\": \"borduria\",\n    \"datasetId\": \"5d5f8df4-e70c-4f8f-aa7e-6737d9ee9915\",\n    \"platformId\": \"acme\",\n    \"subsetId\": \"full\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8880/v1/control/uil",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8880",
									"path": [
										"v1",
										"control",
										"uil"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET UIL Control",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://localhost:8880/v1/control/uil?requestId={{requestId}}",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8880",
									"path": [
										"v1",
										"control",
										"uil"
									],
									"query": [
										{
											"key": "requestId",
											"value": "{{requestId}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "POST Identifiers Control",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let responseData = pm.response.json();",
											"pm.globals.set(\"requestId\", responseData.requestId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"identifier\": \"tybkuj\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8880/v1/control/identifiers",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8880",
									"path": [
										"v1",
										"control",
										"identifiers"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET Identifiers Control",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://localhost:8880/v1/control/identifiers?requestId={{requestId}}",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8880",
									"path": [
										"v1",
										"control",
										"identifiers"
									],
									"query": [
										{
											"key": "requestId",
											"value": "{{requestId}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "POST Follow Up For UIL",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"message\" : \"LENS > PSG\",\n    \"requestId\": \"{{requestId}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8880/v1/control/uil/follow-up",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8880",
									"path": [
										"v1",
										"control",
										"uil",
										"follow-up"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Platform",
					"item": [
						{
							"name": "Upload Identifiers [EDelivery]",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"consignment\": {\n    \"carrierAcceptanceDateTime\": {\n      \"formatId\": \"205\",\n      \"value\": \"202310011000+0000\"\n    },\n    \"deliveryEvent\": {\n      \"actualOccurrenceDateTime\": {\n        \"formatId\": \"205\",\n        \"value\": \"202310021500+0000\"\n      }\n    },\n    \"mainCarriageTransportMovement\": [\n      {\n        \"dangerousGoodsIndicator\": false,\n        \"modeCode\": \"1\",\n        \"usedTransportMeans\": {\n          \"id\": {\n            \"schemeAgencyId\": \"UN\",\n            \"value\": \"12345\"\n          },\n          \"registrationCountry\": {\n            \"code\": \"DE\"\n          }\n        }\n      }\n    ],\n    \"usedTransportEquipment\": [\n      {\n        \"carriedTransportEquipment\": [\n          {\n            \"id\": {\n              \"schemeAgencyId\": \"UN\",\n              \"value\": \"67890\"\n            },\n            \"sequenceNumber\": 1\n          }\n        ],\n        \"categoryCode\": \"AE\",\n        \"id\": {\n          \"schemeAgencyId\": \"UN\",\n          \"value\": \"54321\"\n        },\n        \"registrationCountry\": {\n          \"code\": \"FR\"\n        },\n        \"sequenceNumber\": 2\n      }\n    ]\n  },\n  \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8070/identifiers/upload",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8070",
									"path": [
										"identifiers",
										"upload"
									]
								}
							},
							"response": []
						},
						{
							"name": "Upload File",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "/home/rasmus/proge/gates/efti-gate/deploy/platform/cda/12345678-ab12-4ab6-8999-123456789abc.xml"
										}
									]
								},
								"url": {
									"raw": "http://localhost:8070/identifiers/upload/file",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8070",
									"path": [
										"identifiers",
										"upload",
										"file"
									]
								}
							},
							"response": []
						},
						{
							"name": "Upload Identifiers [REST method]",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Access the form data in the request",
											"const formData = pm.request.body.formdata;",
											"",
											"const a = formData[0]",
											"formData.map(i => {",
											"    if (i.key === \"consignmentFile\") {",
											"        const fileName = i.src.split(\"/\").at(-1).split(\".\").at(0)",
											"        pm.environment.set(\"uploaded_dataset_it\", fileName);",
											"    }",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "consignmentFile",
											"type": "file",
											"src": "/home/rig/Documents/Projects/DLK/efti-gate/testing/testdata/5d5f8df4-e70c-4f8f-aa7e-6737d9ee9915.xml"
										}
									]
								},
								"url": {
									"raw": "http://localhost:8070/identifiers/upload/consignment/{{uploaded_dataset_it}}",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8070",
									"path": [
										"identifiers",
										"upload",
										"consignment",
										"{{uploaded_dataset_it}}"
									]
								}
							},
							"response": []
						}
					]
				}
			],
			"description": "Borduria local development requests"
		},
		{
			"name": "EE",
			"item": [
				{
					"name": "Gate",
					"item": [
						{
							"name": "POST UIL Control",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let responseData = pm.response.json();",
											"pm.globals.set(\"requestId\", responseData.requestId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"gateId\": \"borduria\",\n    \"datasetId\": \"5d5f8df4-e70c-4f8f-aa7e-6737d9ee9915\",\n    \"platformId\": \"acme\",\n    \"subsetId\": \"full\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8881/v1/control/uil",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8881",
									"path": [
										"v1",
										"control",
										"uil"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET UIL Control",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://localhost:8881/v1/control/uil?requestId={{requestId}}",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8881",
									"path": [
										"v1",
										"control",
										"uil"
									],
									"query": [
										{
											"key": "requestId",
											"value": "{{requestId}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "POST Identifiers Control",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let responseData = pm.response.json();",
											"pm.globals.set(\"requestId\", responseData.requestId);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\n  \"identifier\": \"qlcvhc\"\n\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8881/v1/control/identifiers",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8881",
									"path": [
										"v1",
										"control",
										"identifiers"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET Identifiers Control",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://localhost:8881/v1/control/identifiers?requestId={{requestId}}",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8881",
									"path": [
										"v1",
										"control",
										"identifiers"
									],
									"query": [
										{
											"key": "requestId",
											"value": "{{requestId}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "POST Follow Up For UIL",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"message\" : \"LENS > PSG\",\n    \"requestId\": \"{{requestId}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8881/v1/control/uil/follow-up",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8881",
									"path": [
										"v1",
										"control",
										"uil",
										"follow-up"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Platform",
					"item": [
						{
							"name": "Upload Identifiers",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"consignment\": {\n    \"carrierAcceptanceDateTime\": {\n      \"formatId\": \"205\",\n      \"value\": \"202310011000+0000\"\n    },\n    \"deliveryEvent\": {\n      \"actualOccurrenceDateTime\": {\n        \"formatId\": \"205\",\n        \"value\": \"202310021500+0000\"\n      }\n    },\n    \"mainCarriageTransportMovement\": [\n      {\n        \"dangerousGoodsIndicator\": false,\n        \"modeCode\": \"1\",\n        \"usedTransportMeans\": {\n          \"id\": {\n            \"schemeAgencyId\": \"UN\",\n            \"value\": \"12345\"\n          },\n          \"registrationCountry\": {\n            \"code\": \"DE\"\n          }\n        }\n      }\n    ],\n    \"usedTransportEquipment\": [\n      {\n        \"carriedTransportEquipment\": [\n          {\n            \"id\": {\n              \"schemeAgencyId\": \"UN\",\n              \"value\": \"67890\"\n            },\n            \"sequenceNumber\": 1\n          }\n        ],\n        \"categoryCode\": \"AE\",\n        \"id\": {\n          \"schemeAgencyId\": \"UN\",\n          \"value\": \"54321\"\n        },\n        \"registrationCountry\": {\n          \"code\": \"FR\"\n        },\n        \"sequenceNumber\": 2\n      }\n    ]\n  },\n  \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8072/identifiers/upload",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8072",
									"path": [
										"identifiers",
										"upload"
									]
								}
							},
							"response": []
						},
						{
							"name": "Upload File",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "/home/rig/Documents/Projects/DLK/efti-gate/implementation/platform-gate-simulator/src/main/resources/cda/12345678-ab12-4ab6-8999-123456789abc.xml"
										}
									]
								},
								"url": {
									"raw": "http://localhost:8072/identifiers/upload/file",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8072",
									"path": [
										"identifiers",
										"upload",
										"file"
									]
								}
							},
							"response": []
						},
						{
							"name": "Upload Identifiers [REST method] Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Access the form data in the request",
											"const formData = pm.request.body.formdata;",
											"",
											"const a = formData[0]",
											"formData.map(i => {",
											"    if (i.key === \"consignmentFile\") {",
											"        const fileName = i.src.split(\"/\").at(-1).split(\".\").at(0)",
											"        pm.environment.set(\"uploaded_dataset_it\", fileName);",
											"    }",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "consignmentFile",
											"type": "file",
											"src": "/home/rig/Documents/Projects/DLK/efti-gate/testing/testdata/5d5f8df4-e70c-4f8f-aa7e-6737d9ee9915.xml"
										}
									]
								},
								"url": {
									"raw": "http://localhost:8072/identifiers/upload/consignment/{{uploaded_dataset_it}}",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8072",
									"path": [
										"identifiers",
										"upload",
										"consignment",
										"{{uploaded_dataset_it}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Upload Identifiers [REST method] Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Access the form data in the request",
											"const formData = pm.request.body.formdata;",
											"",
											"const a = formData[0]",
											"formData.map(i => {",
											"    if (i.key === \"consignmentFile\") {",
											"        const fileName = i.src.split(\"/\").at(-1).split(\".\").at(0)",
											"        pm.environment.set(\"uploaded_dataset_it\", fileName);",
											"    }",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "X-API-Key",
										"value": "SuperSecretSecret123",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "consignmentFile",
											"type": "file",
											"src": "/home/rig/Documents/Projects/DLK/efti-gate/testing/testdata/5d5f8df4-e70c-4f8f-aa7e-6737d9ee9915.xml"
										}
									]
								},
								"url": {
									"raw": "http://localhost:8072/identifiers/upload/consignment/{{uploaded_dataset_it}}",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8072",
									"path": [
										"identifiers",
										"upload",
										"consignment",
										"{{uploaded_dataset_it}}"
									]
								}
							},
							"response": []
						}
					]
				}
			],
			"description": "Listenbourg local development requests"
		}
	]
}